<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login</title>
  <link rel="stylesheet" href="static/css/theme.css">
  <style>
    body { font-family: 'Poppins', sans-serif; background:#ffeaea; display:flex; align-items:center; justify-content:center; height:100vh; margin:0; }
    .card { width:100%; max-width:420px; background:#fff; padding:28px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.15); }
    h2 { margin:0 0 16px; color:#b10000; }
    input { width:100%; padding:12px; border:1px solid #ccc; border-radius:8px; margin:8px 0; box-sizing:border-box; }
    button { width:100%; padding:12px; margin-top:12px; background:#d32f2f; color:#fff; border:none; border-radius:8px; font-weight:700; cursor:pointer; }
    button:hover { background:#b71c1c; }
    .error { color:#c00; font-size:14px; display:none; margin-top:8px; }
    .link { text-align:center; margin-top:12px; }
    .link a { color:#d32f2f; font-weight:600; text-decoration:none; }
  </style>
  </head>
  <body>
    <div class="card">
      <h2>Login</h2>
      <form id="loginForm">
        <input type="email" name="email" placeholder="Email" required>
        <input type="password" name="password" placeholder="Password" required>
        <div class="error" id="loginError"></div>
        <button type="submit">Login</button>
      </form>
      <div class="link">New here? <a href="signup.html">Create account</a></div>
    </div>
    <script src="static/js/api-client.js"></script>
    <script>
      document.getElementById('loginForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        const form = e.target;
        const res = await api.login(form.email.value.trim(), form.password.value);
        const err = document.getElementById('loginError');
        if (res.success) {
          window.location.href = 'index.html';
        } else {
          err.textContent = res.data?.error || 'Login failed';
          err.style.display = 'block';
        }
      });
    </script>
  </body>
  </html>
